╔══════════════════════════════════════════════════════════════════════════════╗
║                    🔧 FIX: Port Already In Use                               ║
║              Error: EADDRINUSE, errno: -4091, port: 3000                     ║
╚══════════════════════════════════════════════════════════════════════════════╝

This means another program is using port 3000!

═══════════════════════════════════════════════════════════════════════════════

⚡ QUICK FIX #1: Use Different Port (EASIEST!)
═══════════════════════════════════════════════════════════════════════════════

Windows:
────────────────────────────────────────────────────────────────────────────

1. Open .env file:
   notepad .env

2. Change this line:
   PORT=3000
   
   To this:
   PORT=3001

3. Save and close

4. Restart server:
   npm start

5. Visit: http://localhost:3001

Mac/Linux:
────────────────────────────────────────────────────────────────────────────

1. Edit .env:
   nano .env

2. Change PORT=3000 to PORT=3001

3. Save (Ctrl+X, Y, Enter)

4. Restart: npm start

5. Visit: http://localhost:3001

═══════════════════════════════════════════════════════════════════════════════

🔧 FIX #2: Kill Process on Port 3000
═══════════════════════════════════════════════════════════════════════════════

WINDOWS (PowerShell):
────────────────────────────────────────────────────────────────────────────

# Find what's using port 3000
netstat -ano | findstr :3000

# You'll see something like:
# TCP    0.0.0.0:3000    0.0.0.0:0    LISTENING    12345

# Kill it (replace 12345 with your PID):
taskkill /PID 12345 /F

# Now try again:
npm start

MAC/LINUX:
────────────────────────────────────────────────────────────────────────────

# Find and kill process on port 3000
lsof -ti:3000 | xargs kill -9

# Or step by step:
# 1. Find process
lsof -i:3000

# 2. Note the PID
# 3. Kill it
kill -9 [PID]

# Now try again:
npm start

═══════════════════════════════════════════════════════════════════════════════

🔍 FIX #3: Check If Your Server Is Already Running
═══════════════════════════════════════════════════════════════════════════════

Common cause: You ran npm start twice!

1. Look for other terminal/PowerShell windows
2. Close them all
3. Try again in ONE window only

Or press Ctrl+C in the terminal to stop the server first.

═══════════════════════════════════════════════════════════════════════════════

📝 COMPLETE WINDOWS SOLUTION
═══════════════════════════════════════════════════════════════════════════════

Copy and paste these commands in PowerShell:

# Method 1: Find and kill
$port = 3000
$process = Get-NetTCPConnection -LocalPort $port -ErrorAction SilentlyContinue | Select-Object -ExpandProperty OwningProcess
if ($process) {
    Stop-Process -Id $process -Force
    Write-Host "Killed process on port $port"
} else {
    Write-Host "No process found on port $port"
}

# Then start server
npm start

OR

# Method 2: Just use different port
# Edit .env
notepad .env
# Change PORT=3000 to PORT=3001
# Save and close
npm start

═══════════════════════════════════════════════════════════════════════════════

🎯 RECOMMENDED: Use Port 3001
═══════════════════════════════════════════════════════════════════════════════

Easiest solution - avoid conflicts!

Edit .env:
PORT=3001

Or try other ports:
- PORT=3001
- PORT=8080
- PORT=8000
- PORT=5000

All work fine!

═══════════════════════════════════════════════════════════════════════════════

✅ VERIFICATION
═══════════════════════════════════════════════════════════════════════════════

After fixing, you should see:

✅ Server running on http://localhost:3001
✅ USDC payment monitoring active!
✅ No errors

Then open: http://localhost:3001

═══════════════════════════════════════════════════════════════════════════════

🔧 TROUBLESHOOTING
═══════════════════════════════════════════════════════════════════════════════

Still getting error?
────────────────────────────────────────────────────────────────────────────

1. Close ALL terminal windows
2. Restart your computer (easiest!)
3. Open ONE terminal
4. Run: npm start
5. Should work!

Port 3001 also in use?
────────────────────────────────────────────────────────────────────────────

Try: PORT=8080 or PORT=5000

Multiple Node processes?
────────────────────────────────────────────────────────────────────────────

Windows:
taskkill /IM node.exe /F

Mac/Linux:
killall node

Then try npm start again

═══════════════════════════════════════════════════════════════════════════════

🎉 DONE!
═══════════════════════════════════════════════════════════════════════════════

Your server should now be running on whatever port you chose!

Visit: http://localhost:[YOUR_PORT]

Example: http://localhost:3001

═══════════════════════════════════════════════════════════════════════════════
